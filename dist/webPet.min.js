!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var n=e();for(var o in n)("object"==typeof exports?exports:t)[o]=n[o]}}(window,function(){return function(t){var e={};function n(o){if(e[o])return e[o].exports;var i=e[o]={i:o,l:!1,exports:{}};return t[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:o})},n.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=8)}([function(t,e){t.exports=function(t){var e="undefined"!=typeof window&&window.location;if(!e)throw new Error("fixUrls requires window.location");if(!t||"string"!=typeof t)return t;var n=e.protocol+"//"+e.host,o=n+e.pathname.replace(/\/[^\/]*$/,"/");return t.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(t,e){var i,a=e.trim().replace(/^"(.*)"$/,function(t,e){return e}).replace(/^'(.*)'$/,function(t,e){return e});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(a)?t:(i=0===a.indexOf("//")?a:0===a.indexOf("/")?n+a:o+a.replace(/^\.\//,""),"url("+JSON.stringify(i)+")")})}},function(t,e,n){var o={},i=function(t){var e;return function(){return void 0===e&&(e=t.apply(this,arguments)),e}}(function(){return window&&document&&document.all&&!window.atob}),a=function(t){var e={};return function(t){if("function"==typeof t)return t();if(void 0===e[t]){var n=function(t){return document.querySelector(t)}.call(this,t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}e[t]=n}return e[t]}}(),r=null,s=0,p=[],c=n(0);function u(t,e){for(var n=0;n<t.length;n++){var i=t[n],a=o[i.id];if(a){a.refs++;for(var r=0;r<a.parts.length;r++)a.parts[r](i.parts[r]);for(;r<i.parts.length;r++)a.parts.push(v(i.parts[r],e))}else{var s=[];for(r=0;r<i.parts.length;r++)s.push(v(i.parts[r],e));o[i.id]={id:i.id,refs:1,parts:s}}}}function d(t,e){for(var n=[],o={},i=0;i<t.length;i++){var a=t[i],r=e.base?a[0]+e.base:a[0],s={css:a[1],media:a[2],sourceMap:a[3]};o[r]?o[r].parts.push(s):n.push(o[r]={id:r,parts:[s]})}return n}function l(t,e){var n=a(t.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var o=p[p.length-1];if("top"===t.insertAt)o?o.nextSibling?n.insertBefore(e,o.nextSibling):n.appendChild(e):n.insertBefore(e,n.firstChild),p.push(e);else if("bottom"===t.insertAt)n.appendChild(e);else{if("object"!=typeof t.insertAt||!t.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var i=a(t.insertInto+" "+t.insertAt.before);n.insertBefore(e,i)}}function f(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t);var e=p.indexOf(t);e>=0&&p.splice(e,1)}function h(t){var e=document.createElement("style");return t.attrs.type="text/css",g(e,t.attrs),l(t,e),e}function g(t,e){Object.keys(e).forEach(function(n){t.setAttribute(n,e[n])})}function v(t,e){var n,o,i,a;if(e.transform&&t.css){if(!(a=e.transform(t.css)))return function(){};t.css=a}if(e.singleton){var p=s++;n=r||(r=h(e)),o=w.bind(null,n,p,!1),i=w.bind(null,n,p,!0)}else t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=function(t){var e=document.createElement("link");return t.attrs.type="text/css",t.attrs.rel="stylesheet",g(e,t.attrs),l(t,e),e}(e),o=function(t,e,n){var o=n.css,i=n.sourceMap,a=void 0===e.convertToAbsoluteUrls&&i;(e.convertToAbsoluteUrls||a)&&(o=c(o));i&&(o+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */");var r=new Blob([o],{type:"text/css"}),s=t.href;t.href=URL.createObjectURL(r),s&&URL.revokeObjectURL(s)}.bind(null,n,e),i=function(){f(n),n.href&&URL.revokeObjectURL(n.href)}):(n=h(e),o=function(t,e){var n=e.css,o=e.media;o&&t.setAttribute("media",o);if(t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}.bind(null,n),i=function(){f(n)});return o(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;o(t=e)}else i()}}t.exports=function(t,e){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(e=e||{}).attrs="object"==typeof e.attrs?e.attrs:{},e.singleton||"boolean"==typeof e.singleton||(e.singleton=i()),e.insertInto||(e.insertInto="head"),e.insertAt||(e.insertAt="bottom");var n=d(t,e);return u(n,e),function(t){for(var i=[],a=0;a<n.length;a++){var r=n[a];(s=o[r.id]).refs--,i.push(s)}t&&u(d(t,e),e);for(a=0;a<i.length;a++){var s;if(0===(s=i[a]).refs){for(var p=0;p<s.parts.length;p++)s.parts[p]();delete o[s.id]}}}};var m=function(){var t=[];return function(e,n){return t[e]=n,t.filter(Boolean).join("\n")}}();function w(t,e,n,o){var i=n?"":o.css;if(t.styleSheet)t.styleSheet.cssText=m(e,i);else{var a=document.createTextNode(i),r=t.childNodes;r[e]&&t.removeChild(r[e]),r.length?t.insertBefore(a,r[e]):t.appendChild(a)}}},function(t,e){t.exports=function(t){var e=[];return e.toString=function(){return this.map(function(e){var n=function(t,e){var n=t[1]||"",o=t[3];if(!o)return n;if(e&&"function"==typeof btoa){var i=function(t){return"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(t))))+" */"}(o),a=o.sources.map(function(t){return"/*# sourceURL="+o.sourceRoot+t+" */"});return[n].concat(a).concat([i]).join("\n")}return[n].join("\n")}(e,t);return e[2]?"@media "+e[2]+"{"+n+"}":n}).join("")},e.i=function(t,n){"string"==typeof t&&(t=[[null,t,""]]);for(var o={},i=0;i<this.length;i++){var a=this[i][0];"number"==typeof a&&(o[a]=!0)}for(i=0;i<t.length;i++){var r=t[i];"number"==typeof r[0]&&o[r[0]]||(n&&!r[2]?r[2]=n:n&&(r[2]="("+r[2]+") and ("+n+")"),e.push(r))}},e}},function(t,e,n){(t.exports=n(2)(!1)).push([t.i,"div.web-pet {\n  display: block;\n  width: 100px;\n  height: 100px;\n  position: absolute;\n  left: 0px;\n  top: 0px;\n  z-index: 9999; }\n  div.web-pet * {\n    box-sizing: border-box; }\n  div.web-pet > div.pet {\n    width: 100px;\n    height: 100px;\n    background-repeat: no-repeat;\n    background-size: 100%;\n    cursor: move; }\n    div.web-pet > div.pet.moving {\n      animation-name: moving;\n      animation-duration: 1.5s;\n      animation-iteration-count: infinite;\n      transition-timing-function: ease;\n      transform-origin: bottom center;\n      will-change: transform; }\n\n@keyframes moving {\n  0% {\n    transform: scale(1.05); }\n  50% {\n    transform: scale(0.95); }\n  100% {\n    transform: scale(1.05); } }\n  div.web-pet > section.pet-message {\n    display: table;\n    position: absolute;\n    width: 0px;\n    height: 0px;\n    right: 100px;\n    bottom: 50px;\n    background: white;\n    border-radius: 10px;\n    text-align: center;\n    padding: 10px 0px;\n    color: #555;\n    z-index: 1;\n    box-shadow: -4px 0 4px rgba(7, 17, 27, 0.1), 4px 0 4px rgba(7, 17, 27, 0.1), 0 -4px 4px rgba(7, 17, 27, 0.1), 0 4px 4px rgba(7, 17, 27, 0.1); }\n    div.web-pet > section.pet-message .pet-msg {\n      font-size: 14px;\n      display: none;\n      padding: 0px 5px; }\n    div.web-pet > section.pet-message .pet-msg-operate {\n      padding-top: 10px;\n      width: 100%; }\n      div.web-pet > section.pet-message .pet-msg-operate .msg-btn {\n        color: #fff;\n        border: none;\n        box-shadow: none;\n        border-radius: 5px;\n        font-weight: 600;\n        font-size: 14px;\n        padding: 5px 14px;\n        margin: 0px 5px;\n        cursor: pointer; }\n        div.web-pet > section.pet-message .pet-msg-operate .msg-btn.confirm {\n          background-color: #a3dd82; }\n        div.web-pet > section.pet-message .pet-msg-operate .msg-btn.cancel {\n          color: #555;\n          background-color: #efefef; }\n  div.web-pet > div.pet-menu {\n    width: 90px;\n    height: 100px;\n    position: absolute;\n    right: -91px;\n    top: 0px;\n    border-radius: 4px;\n    display: none; }\n    div.web-pet > div.pet-menu ul {\n      box-shadow: 0 2px 12px 0 rgba(0, 0, 0, 0.1);\n      padding: 10px 0px;\n      padding-left: 0;\n      margin-top: 0;\n      margin-bottom: 0;\n      border-radius: 4px; }\n      div.web-pet > div.pet-menu ul li {\n        position: relative;\n        display: block;\n        list-style: none;\n        line-height: 36px;\n        padding: 0 20px;\n        margin: 0;\n        font-size: 14px;\n        color: #606266;\n        cursor: pointer;\n        outline: none; }\n        div.web-pet > div.pet-menu ul li:hover {\n          color: #2c84cc; }\n  div.web-pet > div.pet-operate {\n    position: absolute;\n    bottom: -60px;\n    left: -35px;\n    box-shadow: 0 2px 12px 0 rgba(0, 0, 0, 0.1);\n    margin-top: 0;\n    margin-bottom: 0;\n    border-radius: 4px;\n    max-height: 50px;\n    min-height: 50px;\n    min-width: 170px;\n    max-width: 170px;\n    overflow: hidden;\n    display: none;\n    background-color: rgba(255, 255, 255, 0.9); }\n    div.web-pet > div.pet-operate > div {\n      position: relative;\n      top: 0; }\n      div.web-pet > div.pet-operate > div.switch-animate {\n        transition: top 0.5s; }\n      div.web-pet > div.pet-operate > div .pet-operate-list {\n        padding: 13px 10px; }\n        div.web-pet > div.pet-operate > div .pet-operate-list a {\n          cursor: pointer; }\n      div.web-pet > div.pet-operate > div .pet-operate-content {\n        position: relative;\n        padding: 10px 5px; }\n        div.web-pet > div.pet-operate > div .pet-operate-content .return-btn {\n          float: right;\n          width: 19%;\n          height: 30px;\n          border: none;\n          box-shadow: none;\n          border-radius: 5px;\n          font-weight: 600;\n          font-size: 12px;\n          color: #fff;\n          background-color: #e64942;\n          padding: 0px;\n          margin: 0px;\n          cursor: pointer; }\n        div.web-pet > div.pet-operate > div .pet-operate-content .pet-chat {\n          float: left;\n          width: 79%;\n          display: block;\n          height: 30px;\n          padding: 5px 10px;\n          font-size: 14px;\n          line-height: 1.42857143;\n          color: #555;\n          background-color: #fff;\n          background-image: none;\n          border: 1px solid #ccc;\n          border-radius: 4px; }\n\n.pet-paw-warp {\n  display: block;\n  width: 100px;\n  height: 100px;\n  position: absolute;\n  left: 160px;\n  top: 0px;\n  z-index: 9998; }\n  .pet-paw-warp > svg {\n    display: none; }\n  .pet-paw-warp .pet-paw-list {\n    position: absolute;\n    width: 10px;\n    left: 50%;\n    bottom: 25%;\n    transform-origin: 100% 100%;\n    transform: rotate(360deg);\n    font-size: 50px;\n    color: #3598dc; }\n    .pet-paw-warp .pet-paw-list .pet-paw {\n      width: 20px;\n      height: 30px;\n      animation: 3050ms pawAnimation ease-in 1;\n      opacity: 0;\n      position: absolute; }\n      .pet-paw-warp .pet-paw-list .pet-paw svg {\n        width: 100%;\n        height: 100%; }\n      .pet-paw-warp .pet-paw-list .pet-paw .icon {\n        fill: currentColor; }\n      .pet-paw-warp .pet-paw-list .pet-paw:nth-child(odd) {\n        transform: rotate(-10deg); }\n      .pet-paw-warp .pet-paw-list .pet-paw:nth-child(even) {\n        transform: rotate(10deg) translate(125%, 0); }\n\n@keyframes pawAnimation {\n  0% {\n    opacity: 1; }\n  50% {\n    opacity: 0; }\n  100% {\n    opacity: 0; } }\n",""])},function(t,e,n){var o=n(3);"string"==typeof o&&(o=[[t.i,o,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(1)(o,i);o.locals&&(t.exports=o.locals)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getJquery=function(){return new Promise(function(t,e){var n=document.createElement("script");n.type="text/javascript",n.src="https://cdn.bootcss.com/jquery/3.3.1/jquery.min.js",n.onload=function(e){t(e)},n.onerror=e,document.head.appendChild(n)})},e.countMessageSize=function(t){var e={s:{height:50,width:100},m:{height:70,width:150},l:{height:90,width:250}},n=t.length;return n<10?e.s:n<30?e.m:e.l},e.countDiagonal=function(t,e){return Math.sqrt(t*t+e*e)},e.countAngle=function(t,e){return 1==t?90-e:2==t?270+e:3==t?270-e:4==t?90+e:void 0},e.countQuadrant=function(t,e){return{11:4,"01":3,"00":2,10:1}[(e.left-t.left>0?"1":"0")+(e.top-t.top>0?"1":"0")]},e.getDeepAttrValue=function(t,e,n){var o;return e.split(n).forEach(function(e,n){o=n?o[e]:t[e]}),o};e.defaultDictionary={answer:[{key:"你好,hello,雷猴",value:"你好"},{key:"名字,你叫什么名字",value:"为什么要告诉你"}],conversation:[{key:"random",value:"..."},{key:"random",value:"你好，人类"},{key:"random",value:"-. -"},{key:"random",value:"(^・ω・^ )"},{key:"random",value:"今天遇到了什么有趣的事情了吗？"},{key:"hover",value:"- -"},{key:"hover",value:"莫挨老子"},{key:"hover",value:"老是碰我干嘛"}],greet:[{key:"common",value:"很高兴认识你"},{key:"beforeSunrise",value:"天快亮了吧"},{key:"earlyMorning",value:"新的一天，要开心啊"},{key:"earlyMorning",value:"你也起的挺早的"},{key:"earlyMorning",value:"(￣o￣) . z Z"},{key:"morning",value:"早上好"},{key:"afternoon",value:"下午好"},{key:"afternoon",value:"下午就是漫长难熬"},{key:"night",value:"晚上好"},{key:"night",value:"该动身回家了"},{key:"latenight",value:"很晚了，该去睡觉了"},{key:"latenight",value:"(￣o￣) . z Z"},{key:"midnight",value:"去睡觉，现在，马上！"},{key:"midnight",value:"已经很晚了，马上睡觉！"}]}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.container='<div class="web-pet"></div>';e.pet='<div class="pet"></div>';e.message='<section class="pet-message">\n            <div class="pet-msg">\n            </div>\n            <div class="pet-msg-operate">\n            </div>\n        </section>\n        ';e.msgBtn='\n            <button class="msg-btn"></button>\n            ';e.menu='<div class="pet-menu">\n            <ul>\n                <li data-fn="chat">聊天</li>\n            </ul>\n        </div>';e.operate='<div class="pet-operate">\n            <div class="switch-animate">\n                <div class="pet-operate-list"></div>\n            </div>\n        </div>';e.returnBtn='<button class="return-btn">取消</button>';e.chatBtn='<a>\n                <img class="emoji" alt="chat" height="20" width="20" src="https://github.githubassets.com/images/icons/emoji/speech_balloon.png">\n            </a>';e.chatContent='<div class="pet-operate-content" data-type="chat">\n                <input class="pet-chat"/>\n            </div>';e.pawWrap='<div class="pet-paw-warp">\n        <svg>\n            <symbol id="pet-paw-svg" viewBox="0 0 249 209.32">\n                <ellipse cx="27.917" cy="106.333" stroke-width="0" rx="27.917" ry="35.833"></ellipse>\n                <ellipse cx="84.75" cy="47.749" stroke-width="0" rx="34.75" ry="47.751"></ellipse>\n                <ellipse cx="162" cy="47.749" stroke-width="0" rx="34.75" ry="47.751"></ellipse>\n                <ellipse cx="221.083" cy="106.333" stroke-width="0" rx="27.917" ry="35.833"></ellipse>\n                <path stroke-width="0" d="M43.98 165.39s9.76-63.072 76.838-64.574c0 0 71.082-6.758 83.096 70.33 0 0 2.586 19.855-12.54 31.855 0 0-15.75 17.75-43.75-6.25 0 0-7.124-8.374-24.624-7.874 0 0-12.75-.125-21.5 6.625 0 0-16.375 18.376-37.75 12.75 0 0-28.29-7.72-19.77-42.86z"></path>\n            </symbol>\n        </svg>\n        <div class="pet-paw-list">\n            \n        </div>\n    </div>\n    ';e.paw='<div class="pet-paw">\n            <svg class="icon">\n                <use xlink:href="#pet-paw-svg"></use>\n            </svg>\n        </div>\n        '},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(6),i=n(5),a=function(){function t(t){this.$pawWrapQueue=[],this.$analyticsData={operateInfo:{hoverPet:0},sessionInfo:{}},this.options={name:"pet",footPrint:!0,isShow:!0,firstPosition:"rightLower",operate:{chat:!0},action:{interval:{randomMove:35e3,randomSay:3e4},firstGreet:!0,randomMove:!0,randomSay:!0},statusImg:{default:"https://web-pet-1253668581.cos.ap-chengdu.myqcloud.com/default.png",hover:"https://web-pet-1253668581.cos.ap-chengdu.myqcloud.com/move.png",move:"https://web-pet-1253668581.cos.ap-chengdu.myqcloud.com/default.png"},server:{answer:{url:"",method:"POST",dataPath:"data",separator:"."},learn:{url:"",method:"POST"},report:{url:"",headers:{type:"application/x-www-form-urlencoded"}}},on:{created:function(){},mounted:function(){}}};var e=this;if(!window)throw new Error("Sorry, I can only play in the browser.");window.$&&window.$.fn?e.create(t):i.getJquery().then(function(){e.create(t)})}return t.prototype.create=function(t){this.$=window.$,t&&(this.options=this.$.extend(!0,{},this.options,t)),this.trigger("created").init().checkDictionary().actionEvent().done()},t.prototype.init=function(){var t=this,e=this.$;return this.$container=e(o.container),this.$pet=e(o.pet),this.$message=e(o.message).data("state",{isOpen:!1,type:"default"}),this.$msg=this.$message.find("div.pet-msg"),this.$menu=e(o.menu).on("click",function(n){t[e(n.target).data("fn")]().toggleMenu("fadeOut")}),this.$operate=this.initOperate(),this.$container.append(this.$pet,this.$message,this.$menu,this.$operate),this.changeStatus("default"),this.options.isShow||this.hide(!0),this},t.prototype.chat=function(){return this.toggleOperateContent("chat"),this},t.prototype.checkDictionary=function(){return!localStorage.getItem("petDictionary")&&localStorage.setItem("petDictionary",JSON.stringify(i.defaultDictionary)),this},t.prototype.initOperate=function(){var t=this.$,e=this,n=t(o.operate),i=function(i){var a=t(o[i+"Btn"]).on("click",function(){return e.toggleOperateContent(i)}),r=t(o[i+"Content"]),s=t(o.returnBtn).on("click",function(){return e.toggleOperateContent()});e.onContentEvent(r,i),n.find("div.pet-operate-list").append(a),n.find("div.switch-animate").append(r.append(s))};for(var a in e.options.operate)i(a);return n},t.prototype.onContentEvent=function(t,e){var n=this;"chat"==e&&t.on("keydown",function(t){13==t.keyCode&&(n.initAnswer(t.target.value),t.target.value="")})},t.prototype.toggleOperateContent=function(t){var e=this.$operate.find(".switch-animate"),n=e.find("[data-type="+t+"]"),o=t?-50*n.siblings().length:0;e.css("top",o+"px")},t.prototype.initAnswer=function(t){var e=this.options.server,n=t,o=localStorage.questions;o=o?JSON.parse(decodeURIComponent(o)).concat([n]):[n],localStorage.questions=encodeURIComponent(JSON.stringify(o)),e.answer.url?this.answerFromServer(t):this.answerFromBrowser(t)},t.prototype.answerFromServer=function(t){var e=this,n=e.$,o=e.options.server,a=n.extend(!0,o.answer,{data:{msg:t},success:function(t){var n=i.getDeepAttrValue(t,a.dataPath,a.separator);e.message(n)},error:function(){e.message("抱歉，服务出了点问题")}});n.ajax(a)},t.prototype.answerFromBrowser=function(t){var e=JSON.parse(localStorage.getItem("petDictionary")),n="";try{e.answer.forEach(function(e){e.key.includes(t)&&(n=e.value)})}catch(t){console.info("词典上似乎不存在answer分类。")}this.message(n||"抱歉，这个我不会。")},t.prototype.message=function(t){if(!t)throw new Error("请传递配置以生成消息框");var e=this,n=e.$,a=e.$message.find(".pet-msg-operate"),r=e.$message.data("state");e.$msg.text("").hide(),a.empty().hide(),"string"==typeof t?(r.type="default",e.$msg.text(t)):(r.type="confirm",e.$msg.text(t.text),t.btnList.forEach(function(t){var i=t.type;if(!"confirm,cancel".includes(i))throw new Error("type必须是confirm, cancel之一。");var r=n(o.msgBtn).text(t.text||("confirm"==i?"确认":"取消")).on("click",function(){"cancel"==i&&e.closeMessage(!0),n.isFunction(t.fn)?t.fn.call(e):n.noop}).addClass(i);a.append(r)}));var s={},p=i.countMessageSize("string"==typeof t?t:t.text);r.isOpen?(e.$msg.fadeIn(),a.fadeIn(),"default"==r.type&&e.closeMessage(!1,!0)):(r.isOpen=!0,s={duration:500,complete:function(){e.$msg.fadeIn(),a.fadeIn(),"default"==r.type&&e.closeMessage()}}),e.$message.stop().animate(p,s)},t.prototype.closeMessage=function(t,e){var n=this,o=n.$msg,i=n.$message.data("state");if(t)return clearInterval(i.interval),i.interval=null,n.hideMessage();o.data("countDown",5).attr("data-countDown",5);var a=!i.interval&&i.isOpen&&"default"==i.type;e&&!a||(i.interval=setInterval(function(){var t=o.data("countDown");o.data("countDown",t-1).attr("data-countDown",t-1),0===t&&(clearInterval(i.interval),i.interval=null,"default"==i.type&&n.hideMessage())},1e3))},t.prototype.hideMessage=function(){this.$message.data("state").isOpen=!1,this.$msg.fadeOut().text(""),this.$message.find(".pet-msg-operate").fadeOut().empty(),this.$message.animate({height:0,width:0},{duration:500})},t.prototype.recordData=function(){var t=window.performance.timing,e=window.navigator,n=this.$analyticsData.sessionInfo;return n.language=e.language,n.userAgent=e.userAgent,n.startTime=t.navigationStart,n.refer=encodeURIComponent(document.location.href),n.domReady=t.domInteractive-t.navigationStart,n.loaded=t.loadEventStart-t.navigationStart,this},t.prototype.actionEvent=function(){var t,e,n=this.$,o=this,i=o.$container,a=o.$pet,r=o.options,s=r.action,p=!1,c=!1;return setTimeout(function(){s.firstGreet&&"hide"!=o.$status&&o.firstGreet(),s.randomMove&&window.setInterval(function(){"hide"!=o.$status&&o.randomMove()},s.interval.randomMove),s.randomSay&&window.setInterval(function(){"hide"!=o.$status&&o.randomSay()},s.interval.randomSay)},5e3),r.server.report.url&&(o.recordData(),window.webPetOnReport||(window.webPetOnReport=!0,window.addEventListener("unload",function(){return o.report.call(o)},!1))),n(document).mousemove(function(a){if(p){o.changeStatus("move");var r=a.pageX-t,s=a.pageY-e,u=n(window).width()-i.width(),d=n(document).height()-i.height();r>=0&&r<=u&&s>0&&s<=d&&(i.css({top:s,left:r}),c=!0)}}).mouseup(function(){p=!1}),a.click(function(){c?c=!1:o.randomMove()}).mousedown(function(n){o.stopMove(),3==n.which&&o.toggleMenu(),p=!0,t=n.pageX-parseInt(i.css("left")),e=n.pageY-parseInt(i.css("top"))}).bind("contextmenu",function(){return!1}).mouseover(function(){o.$analyticsData.operateInfo.hoverPet++,o.initiativeSay("conversation","hover",5)}),i.mouseover(function(t){var e=t.target;"pet-message"==e.className||n(e).parents(".pet-message").length||(o.toggleOperate("show"),o.changeStatus("hover"))}).mouseout(function(t){var e=t.target,n=e.nodeName,i=e.className,a=document.activeElement;"div"==n&&"pet-operate"==i||"INPUT"==a.nodeName&&"pet-chat"==a.className||o.toggleOperate("hide"),"move"!==o.$status&&o.changeStatus("default")}),this},t.prototype.done=function(){this.$(window.document.body).prepend(this.$container),this.countFirstPosition(),this.trigger("mounted")},t.prototype.countFirstPosition=function(){var t=document.body.offsetWidth,e=document.documentElement.clientHeight,n=this.options.firstPosition,o={top:{left:t/2-150,top:0},rightUpper:{left:t-150,top:0},right:{left:t-150,top:e/2-150},rightLower:{left:t-150,top:e-150},bottom:{left:t/2-150,top:e-150},leftLower:{left:0,top:e-150},left:{left:0,top:e/2-150},leftUpper:{left:0,top:0}};this.$container.css("object"==typeof n?n:o[n])},t.prototype.report=function(){var t=this.$analyticsData,e=t.sessionInfo;if(e.endTime=(new Date).getTime(),e.sessionTime=e.endTime-e.startTime,localStorage.questions){var n=JSON.parse(decodeURIComponent(localStorage.questions));t.chatInfo=n,localStorage.questions=""}var o=this.options.server.report,i=o.url,a=o.headers;if(navigator.sendBeacon){var r=new Blob([JSON.stringify(t)],a);navigator.sendBeacon(i,r)}else this.$.ajax({url:i,method:"POST",contentType:a.type,data:t})},t.prototype.changeStatus=function(t){var e=this.options.statusImg[t]||this.options.statusImg.default;return this.$status=t,this.$pet.attr("style","background-image: url("+e+")"),this},t.prototype.trigger=function(t){var e=this.options.on;return this.$.isFunction(e[t])&&e[t].call(this),this},t.prototype.firstGreet=function(){var t=(new Date).getHours(),e="";e=0<=t&&t<=3?"midnight":5<=t&&t<6?"beforeSunrise":6<=t&&t<9?"earlyMorning":6<=t&&t<12?"morning":12<=t&&t<18?"afternoon":18<=t&&t<22?"night":22<=t&&t<24?"latenight":"common",this.initiativeSay("greet",e)},t.prototype.randomSay=function(){this.initiativeSay("conversation","random")},t.prototype.initiativeSay=function(t,e,n){if(void 0===n&&(n=100),"default"==this.$message.data("state").type){var o=i.defaultDictionary[t].filter(function(t){if(t.key.split(",").includes(e))return t});~~(100*Math.random())<n&&this.message(o[Math.floor(Math.random()*o.length)].value)}},t.prototype.stopMove=function(){return this.$pet.removeClass("moving"),this.$container.stop(),this},t.prototype.randomMove=function(t,e,n){var a,r=this,s=r.$,p={top:r.$container[0].offsetTop,left:r.$container[0].offsetLeft},c=t||{top:0,left:0},u=[.1,.2,.3,.4,.5,.6,.7,.75,-.1,-.2,-.3,-.4,-.5,-.6,-.7,-.75];!t&&["top","left"].forEach(function(t){var e="top"==t?document.body.offsetHeight:document.body.offsetWidth,n=Math.floor(Math.random()*u.length),o=e/2*(1+u[n]);c[t]=o});var d=30;return r.options.footPrint&&(a=r.initPawWrap(p,c)),r.changeStatus("move"),r.$pet.addClass("moving"),r.$container.animate(c,{duration:e||5e3,step:function(){if(a){var t={top:r.$container[0].offsetTop,left:r.$container[0].offsetLeft},e=Math.abs(t.left-p.left),n=Math.abs(t.top-p.top),c=i.countDiagonal(e,n);if(c-d>0){var u=s(o.paw);u.css({bottom:c}),a.$pawList.append(u),d=c+30}}},complete:function(){d=null,r.changeStatus("default"),r.cleanPawWrap(),r.stopMove(),s.isFunction(n)&&n()}}),r},t.prototype.cleanPawWrap=function(){var t=this;setTimeout(function(){"move"!==t.$status&&t.$pawWrapQueue.forEach(function(t){t.remove()})},1e3)},t.prototype.initPawWrap=function(t,e){var n=this.$,a=Math.abs(e.left-t.left),r=Math.abs(e.top-t.top),s=i.countDiagonal(a,r),p=Math.round(Math.asin(r/s)/Math.PI*180),c=n(o.pawWrap);c.css(t);var u=i.countQuadrant(t,e),d=c.find(".pet-paw-list");return d.css({transform:"rotate("+i.countAngle(u,p)+"deg)",height:s}),n(window.document.body).prepend(c),this.$pawWrapQueue.push(c),{x:a,y:r,diagonal:s,angle:p,$pawList:d}},t.prototype.toggleOperate=function(t){return void 0===t&&(t="show"),t="show"==t?"fadeIn":"fadeOut",this.$operate.stop()[t](),this},t.prototype.toggleMenu=function(t){return t=t?"show"==t?"fadeIn":"fadeOut":"fadeToggle",this.$menu.stop()[t](),this},t.prototype.show=function(){"hide"==this.$status?(this.message("你好"),this.$container.fadeIn(),this.changeStatus("default")):console.info("目标不在隐藏状态")},t.prototype.hide=function(t){var e=this;"hide"==e.$status?console.info("目标已经隐藏了"):t?(e.$container.fadeOut(),e.changeStatus("hide")):(e.message("再见"),setTimeout(function(){e.$container.fadeOut(),e.closeMessage(!0),e.changeStatus("hide")},3e3))},t}();e.default=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(7);e.WebPet=o.default,n(4),e.default=o.default}])});